{% extends 'base.html' %}
{% load static %}

{% block title %}El Senior Original Tailoring - Bespoke Excellence{% endblock %}

{% block extra_css %}
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
    :root {
        --cream: #FFFDF7;
        --brown-light: #A67C52;
        --brown-dark: #3D2917;
        --gold: #C9A97C;
    }

    body {
        font-family: 'Inter', sans-serif;
        background-color: var(--cream);
        overflow-x: hidden;
    }

    .font-serif {
        font-family: 'Playfair Display', serif;
    }

    #canvas-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background: radial-gradient(circle at center, #FFFDF7 0%, #F0E6D8 100%);
    }

    .glass-card {
        background: rgba(255, 253, 247, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(166, 124, 82, 0.2);
    }

    .hero-text {
        text-shadow: 0 10px 30px rgba(61, 41, 23, 0.1);
    }

    .gold-gradient {
        background: linear-gradient(45deg, #8B5E34, #C9A97C, #8B5E34);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .scroll-indicator {
        animation: bounce 2s infinite;
    }

    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        60% { transform: translateY(-5px); }
    }

    .reveal, .hero-reveal, .nav-item {
        opacity: 0;
        transform: translateY(30px);
    }
</style>
{% endblock %}

{% block body %}
<!-- 3D Background -->
<div id="canvas-container"></div>

<!-- Luxury Overlay Content -->
<div class="relative z-10">
    <!-- Navigation -->
    <nav class="px-8 py-6 flex items-center justify-between max-w-7xl mx-auto overflow-hidden">
        <div class="flex items-center space-x-3 nav-item">
            <div class="w-10 h-10 border-2 border-brown-600 flex items-center justify-center rounded-sm rotate-45">
                <span class="text-brown-700 font-bold -rotate-45 text-xl">ES</span>
            </div>
            <span class="text-xl font-bold tracking-tighter text-brown-900 uppercase">El Senior</span>
        </div>
        <div class="nav-item">
            {% if user.is_authenticated %}
            <a href="{% url 'dashboard' %}" class="group relative px-8 py-3 overflow-hidden rounded-full bg-brown-800 text-white font-medium transition-all hover:pr-12 shadow-xl">
                <span class="relative z-10">Go to Dashboard</span>
                <svg class="absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 opacity-0 group-hover:opacity-100 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                </svg>
            </a>
            {% else %}
            <a href="{% url 'login' %}" class="group relative px-8 py-3 overflow-hidden rounded-full bg-brown-800 text-white font-medium transition-all hover:pr-12 shadow-xl">
                <span class="relative z-10">Access Portal</span>
                <svg class="absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 opacity-0 group-hover:opacity-100 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                </svg>
            </a>
            {% endif %}
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="min-h-[90vh] flex flex-col items-center justify-center px-6 text-center">
        <h2 class="hero-reveal text-sm font-bold tracking-[0.4em] uppercase text-brown-500 mb-4">Bespoke Excellence Since 1995</h2>
        <h1 class="hero-reveal text-5xl md:text-8xl font-serif font-bold text-brown-900 leading-tight mb-8">
            Crafting Your <br>
            <span class="gold-gradient italic">Perfect Silhouette</span>
        </h1>
        <p class="hero-reveal text-lg text-brown-700 max-w-xl mx-auto mb-10 leading-relaxed font-light">
            Experience the heritage of artisanal tailoring. Where every stitch tells a story of precision, luxury, and timeless style.
        </p>
        <div class="hero-reveal flex flex-col sm:flex-row gap-6">
            {% if user.is_authenticated %}
            <a href="{% url 'dashboard' %}" class="px-10 py-4 bg-brown-700 text-white rounded-sm font-semibold shadow-2xl hover:bg-brown-800 transition-all transform hover:-translate-y-1">
                Back to Dashboard
            </a>
            {% else %}
            <a href="{% url 'login' %}" class="px-10 py-4 bg-brown-700 text-white rounded-sm font-semibold shadow-2xl hover:bg-brown-800 transition-all transform hover:-translate-y-1">
                Get Started
            </a>
            {% endif %}
            <a href="#about" class="px-10 py-4 glass-card text-brown-800 rounded-sm font-semibold border border-brown-200 hover:bg-cream-100 transition-all">
                Discover Our Process
            </a>
        </div>
        
        <div class="absolute bottom-10 left-1/2 -translate-x-1/2 scroll-indicator">
            <svg class="w-6 h-6 text-brown-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
            </svg>
        </div>
    </section>

        <!-- Features Grid -->
        <section id="about" class="py-24 px-6 bg-white/30">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                    <div class="reveal glass-card p-10 rounded-2xl group hover:border-gold transition-all duration-500">
                        <div class="w-16 h-16 bg-brown-100 rounded-full flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                            <svg class="w-8 h-8 text-brown-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-serif font-bold text-brown-900 mb-4">Artisanal Quality</h3>
                        <p class="text-brown-600 leading-relaxed font-light">Each garment is handcrafted with the finest materials and centuries-old techniques.</p>
                    </div>

                    <div class="reveal glass-card p-10 rounded-2xl group hover:border-gold transition-all duration-500" style="transition-delay: 200ms;">
                        <div class="w-16 h-16 bg-gold/20 rounded-full flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                            <svg class="w-8 h-8 text-brown-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-serif font-bold text-brown-900 mb-4">Precision Management</h3>
                        <p class="text-brown-600 leading-relaxed font-light">Our digital ecosystem ensures your measurements and orders are tracked with absolute precision.</p>
                    </div>

                    <div class="reveal glass-card p-10 rounded-2xl group hover:border-gold transition-all duration-500" style="transition-delay: 400ms;">
                        <div class="w-16 h-16 bg-brown-900 rounded-full flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                            <svg class="w-8 h-8 text-cream-100" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-serif font-bold text-brown-900 mb-4">Timeless Elegance</h3>
                        <p class="text-brown-600 leading-relaxed font-light">From classic tuxedos to modern bespoke suits, we define the standard of elegance.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="py-12 px-6 border-t border-brown-100/30">
            <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center text-brown-500 text-sm">
                <p class="font-light tracking-widest uppercase">&copy; {% now "Y" %} El Senior Original Tailoring</p>
                <div class="flex space-x-8 mt-4 md:mt-0">
                    <a href="#" class="hover:text-brown-800 transition-colors">Privacy</a>
                    <a href="#" class="hover:text-brown-800 transition-colors">Terms</a>
                    <a href="#" class="hover:text-brown-800 transition-colors">Contact</a>
                </div>
            </div>
        </footer>
    </div>
{% endblock %}

{% block extra_js %}
<!-- Three.js Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<!-- GSAP Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<script>
    // --- THREE.JS BACKGROUND SCENE ---
    const container = document.getElementById('canvas-container');
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    container.appendChild(renderer.domElement);

    // Create Golden Thread Geometry (Animated Plane)
    const geometry = new THREE.PlaneGeometry(20, 15, 60, 60);
    const material = new THREE.MeshPhongMaterial({
        color: 0xA67C52,
        wireframe: true,
        transparent: true,
        opacity: 0.2,
        side: THREE.DoubleSide,
    });
    
    const plane = new THREE.Mesh(geometry, material);
    plane.rotation.x = -Math.PI / 3;
    scene.add(plane);

    // Lights
    const ambientLight = new THREE.AmbientLight(0xFFFDF7, 0.8);
    scene.add(ambientLight);
    
    const pointLight = new THREE.PointLight(0xC9A97C, 1.5);
    pointLight.position.set(5, 5, 5);
    scene.add(pointLight);

    camera.position.z = 8;

    // Mouse Movement Tracking
    let mouseX = 0;
    let mouseY = 0;
    document.addEventListener('mousemove', (e) => {
        mouseX = (e.clientX / window.innerWidth) - 0.5;
        mouseY = (e.clientY / window.innerHeight) - 0.5;
    });

    // Animation Loop
    let clock = new THREE.Clock();

    function animate() {
        requestAnimationFrame(animate);
        
        const t = clock.getElapsedTime();
        
        // Wave animation
        const positions = plane.geometry.attributes.position.array;
        for (let i = 0; i < positions.length; i += 3) {
            const x = positions[i];
            const y = positions[i + 1];
            positions[i + 2] = Math.sin(x * 0.5 + t) * 0.5 + Math.cos(y * 0.3 + t) * 0.5;
        }
        plane.geometry.attributes.position.needsUpdate = true;
        
        // Rotation reaction
        plane.rotation.z = mouseX * 0.1;
        plane.rotation.y = mouseY * 0.1;
        
        renderer.render(scene, camera);
    }

    animate();

    // Resize Handler
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // --- GSAP ANIMATIONS ---
    window.addEventListener('load', () => {
        // Initial Entry Animations
        const tl = gsap.timeline({ defaults: { ease: "power4.out" } });
        
        tl.to(".nav-item", { opacity: 1, y: 0, stagger: 0.2, duration: 1 })
          .to(".hero-reveal", { opacity: 1, y: 0, stagger: 0.2, duration: 1.2 }, "-=0.5");

        // Scroll Reveal Animations
        gsap.registerPlugin(ScrollTrigger);

        gsap.utils.toArray('.reveal').forEach((elem) => {
            gsap.to(elem, {
                scrollTrigger: {
                    trigger: elem,
                    start: 'top 85%',
                    toggleActions: 'play none none reverse'
                },
                opacity: 1,
                y: 0,
                duration: 1.5,
                ease: "power3.out"
            });
        });

        // 3D Plane parallax on scroll
        gsap.to(plane.position, {
            scrollTrigger: {
                trigger: "body",
                start: "top top",
                end: "bottom bottom",
                scrub: 1
            },
            z: -2,
            y: 2
        });
    });
</script>
{% endblock %}
