{% comment %}
Task Update Form Partial - HTMX form for updating task status
Expects: task
{% endcomment %}

<form method="post" 
      action="{% url 'task_update_status' task.pk %}" 
      hx-post="{% url 'task_update_status' task.pk %}"
      hx-target="#task-status-container"
      hx-swap="innerHTML"
      class="flex items-center space-x-3">
    {% csrf_token %}
    
    <select name="status"
            class="px-3 py-2 border border-green-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent bg-white text-green-800 text-sm">
        <option value="assigned" {% if task.status == 'assigned' %}selected{% endif %}>Assigned</option>
        <option value="in_progress" {% if task.status == 'in_progress' %}selected{% endif %}>In Progress</option>
        <option value="completed" {% if task.status == 'completed' %}selected{% endif %}>Completed</option>
        {% if user.profile.is_admin %}
        <option value="approved" {% if task.status == 'approved' %}selected{% endif %}>Order Completed</option>
        {% endif %}
    </select>
    
    <button type="submit"
            class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium inline-flex items-center">
        <span class="htmx-indicator mr-2">
            <svg class="animate-spin w-4 h-4" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
            </svg>
        </span>
        Update
    </button>
</form>
