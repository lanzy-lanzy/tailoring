{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - El Senior Original Tailoring</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Inter:wght@300;400;500;600;800&display=swap" rel="stylesheet">
    <script src="{% static 'js/tailwind.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cream: { 50: '#FDFCF9', 100: '#F5F2ED', 200: '#EBE6DE', 500: '#FDFCF9' },
                        brown: { 400: '#A67C52', 500: '#8B5E34', 600: '#6D4A2A', 700: '#503620', 800: '#3D2917' },
                        emerald: { 400: '#34d399', 500: '#10b981', 600: '#059669', 700: '#047857' }
                    },
                    fontFamily: {
                        serif: ['Playfair Display', 'serif'],
                        sans: ['Inter', 'sans-serif']
                    },
                    animation: {
                        'gradient-x': 'gradient-x 15s ease infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        'gradient-x': {
                            '0%, 100%': { 'background-size': '200% 200%', 'background-position': 'left center' },
                            '50%': { 'background-size': '200% 200%', 'background-position': 'right center' },
                        },
                        'float': {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        [x-cloak] { display: none !important; }
        
        #threejs-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .premium-glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 
                0 40px 100px -20px rgba(0, 0, 0, 0.15),
                inset 0 0 0 1px rgba(255, 255, 255, 0.5);
        }

        .stagger-in > * {
            opacity: 0;
            transform: translateY(20px);
            animation: staggerIn 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        .stagger-in > *:nth-child(1) { animation-delay: 0.1s; }
        .stagger-in > *:nth-child(2) { animation-delay: 0.2s; }
        .stagger-in > *:nth-child(3) { animation-delay: 0.3s; }
        .stagger-in > *:nth-child(4) { animation-delay: 0.4s; }
        .stagger-in > *:nth-child(5) { animation-delay: 0.5s; }

        @keyframes staggerIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .input-group:focus-within label {
            color: #10b981;
            transform: translateX(4px);
        }

        .input-premium {
            background: rgba(255, 255, 255, 0.4) !important;
            border: 1px solid rgba(235, 230, 222, 0.8);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .input-premium:focus {
            background: rgba(255, 255, 255, 0.9) !important;
            border-color: #10b981;
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
            transform: scale(1.01);
        }

        .btn-shine {
            position: relative;
            overflow: hidden;
        }

        .btn-shine::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            transition: 0.5s;
        }

        .btn-shine:hover::after {
            left: 100%;
        }

        .heritage-border {
            position: relative;
        }

        .heritage-border::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 2px;
            background: linear-gradient(to right, transparent, #10b981, transparent);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); border-radius: 10px; }
    </style>
</head>
<body class="font-sans min-h-screen flex items-center justify-center p-6 bg-cream-50 overflow-hidden">
    <canvas id="threejs-bg"></canvas>

    <div class="w-full max-w-[420px] relative z-10">
        <!-- Main Card -->
        <div class="premium-glass rounded-[2rem] p-10 md:p-12 stagger-in overflow-hidden relative">
            <!-- Decorative Element -->
            <div class="absolute -top-24 -right-24 w-48 h-48 bg-emerald-500/10 rounded-full blur-3xl"></div>
            <div class="absolute -bottom-24 -left-24 w-48 h-48 bg-brown-500/10 rounded-full blur-3xl"></div>

            <!-- Header -->
            <div class="text-center mb-12 relative">
                <div class="mb-4 inline-flex items-center justify-center w-20 h-20 bg-slate-900 rounded-3xl shadow-2xl border border-white/20 transform hover:rotate-12 transition-transform duration-500 group">
                    <svg class="w-10 h-10 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z" />
                    </svg>
                </div>
                <h1 class="text-4xl font-serif font-black text-slate-900 tracking-tight heritage-border">EL SENIOR</h1>
                <p class="mt-8 text-emerald-600 font-sans tracking-[0.3em] uppercase text-[10px] font-extrabold opacity-80">Heritage Establishment</p>
            </div>
            
            <!-- Messages -->
            {% if messages %}
            <div class="mb-8 space-y-2">
                {% for message in messages %}
                <div class="text-xs text-center p-3 rounded-xl backdrop-blur-md border {% if message.tags == 'error' %}text-red-600 bg-red-500/10 border-red-500/20{% else %}text-emerald-700 bg-emerald-500/10 border-emerald-500/20{% endif %} animate-pulse">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}
            
            <form method="post" action="{% url 'login' %}" class="space-y-8 relative">
                {% csrf_token %}
                <div class="space-y-3 input-group">
                    <label class="block text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1 transition-all">Identity Handle</label>
                    <div class="relative">
                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400">
                            <svg class="w-5 h-5 opacity-40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                        </span>
                        <style>
                            input[name="username"], input[name="password"] {
                                padding-left: 3.25rem !important;
                                height: 3.5rem !important;
                            }
                        </style>
                        {{ form.username }}
                    </div>
                </div>
                
                <div class="space-y-3 input-group">
                    <label class="block text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1 transition-all">Secure Key</label>
                    <div class="relative">
                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400">
                            <svg class="w-5 h-5 opacity-40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                            </svg>
                        </span>
                        {{ form.password }}
                    </div>
                </div>
                
                <button type="submit" 
                        class="w-full bg-slate-900 text-emerald-400 py-5 rounded-[1.25rem] font-black text-xs uppercase tracking-[0.25em] transition-all hover:bg-emerald-500 hover:text-white active:transform active:scale-[0.98] shadow-[0_20px_40px_-10px_rgba(16,185,129,0.3)] btn-shine border border-emerald-500/20">
                    Authorize Entry
                </button>
            </form>

            <div class="mt-12 text-center">
                <a href="{% url 'register' %}" class="group inline-flex items-center gap-2 text-[10px] text-slate-500 hover:text-emerald-600 transition-all uppercase tracking-[0.2em] font-extrabold">
                    <span>Venture Beyond Heritage</span>
                    <svg class="w-4 h-4 transform group-hover:translateX(4px) transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                    </svg>
                </a>
            </div>
        </div>
        
        <div class="mt-12 text-center stagger-in">
            <p class="text-slate-400 text-[9px] uppercase tracking-[0.4em] font-medium opacity-60">
                &copy; 2026 El Senior Original <span class="text-emerald-500 inline-block rotate-90 mx-1">/</span> Tailoring Master
            </p>
        </div>
    </div>

    <!-- Background Interactivity Script -->
    <script>
        // Apply classes to form inputs
        window.addEventListener('DOMContentLoaded', () => {
            const inputs = document.querySelectorAll('input:not([type="hidden"])');
            inputs.forEach(input => {
                input.classList.add('input-premium', 'w-full', 'rounded-2xl', 'text-slate-900', 'font-medium', 'placeholder-slate-300', 'outline-none');
                input.placeholder = input.name.charAt(0).toUpperCase() + input.name.slice(1);
            });
        });

        // Three.js Silk Shimmer Background
        (function() {
            const canvas = document.getElementById('threejs-bg');
            const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            // Geometry for silk shimmer
            const geometry = new THREE.PlaneGeometry(25, 15, 64, 64);
            const material = new THREE.MeshStandardMaterial({
                color: 0x10b981,
                roughness: 0.1,
                metalness: 0.8,
                transparent: true,
                opacity: 0.08,
                wireframe: false,
                side: THREE.DoubleSide
            });

            const silk = new THREE.Mesh(geometry, material);
            silk.rotation.x = -Math.PI / 4;
            scene.add(silk);

            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            const pointLight = new THREE.PointLight(0x10b981, 2);
            pointLight.position.set(5, 5, 5);
            scene.add(pointLight);

            // Mouse Interaction
            let mouseX = 0;
            let mouseY = 0;
            window.addEventListener('mousemove', (e) => {
                mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
                mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
            });

            // Animation Loop
            let time = 0;
            function animate() {
                requestAnimationFrame(animate);
                time += 0.005;

                const positions = silk.geometry.attributes.position.array;
                for (let i = 0; i < positions.length; i += 3) {
                    const x = positions[i];
                    const y = positions[i + 1];
                    positions[i + 2] = 
                        Math.sin(x * 0.5 + time) * 0.5 + 
                        Math.cos(y * 0.3 + time * 0.8) * 0.5 +
                        Math.sin((x + y) * 0.2 + time) * 0.2;
                }
                silk.geometry.attributes.position.needsUpdate = true;

                // Parallax effect
                silk.rotation.y = THREE.MathUtils.lerp(silk.rotation.y, mouseX * 0.1, 0.05);
                silk.rotation.x = THREE.MathUtils.lerp(silk.rotation.x, -Math.PI / 4 + mouseY * 0.1, 0.05);

                renderer.render(scene, camera);
            }

            animate();

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        })();
    </script>
</body>
</html>
